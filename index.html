<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Product Expiry Notifier</title>
  <style>
    /* Your existing CSS styles */
  </style>
</head>
<body>
  <h1>Product Expiry Notifier</h1>

  <div class="form-container">
    <form id="product-form">
      <label for="expiry-date">Select Expiry Date:</label>
      <input type="date" id="expiry-date" required>

      <label for="photo-button">Take Product Photo:</label>
      <button type="button" id="photo-button">Capture Photo</button>

      <input type="submit" value="Save Product">
    </form>
  </div>

  <div id="camera-container" style="display: none;">
    <video id="video" autoplay></video>
    <canvas id="canvas" style="display: none;"></canvas>
    <button id="toggle-camera">Switch Camera</button>
    <button id="capture-button">Take Photo</button>
    <button id="save-button" style="display: none;">Use Photo</button>
  </div>

  <div class="product-list">
    <h2>Product List</h2>
    <table>
      <thead>
        <tr>
          <th>Product Photo</th>
          <th>Days Left</th>
          <th>Actions</th>
        </tr>
      </thead>
      <tbody id="product-list">
        <!-- Products will be dynamically added here -->
      </tbody>
    </table>
  </div>

  <script>
    const photoButton = document.getElementById('photo-button');
    const toggleCameraButton = document.getElementById('toggle-camera');
    const cameraContainer = document.getElementById('camera-container');
    const video = document.getElementById('video');
    const captureButton = document.getElementById('capture-button');
    const saveButton = document.getElementById('save-button');
    let photoData = null;
    let currentFacingMode = 'environment'; // Default to back camera

    // Function to start the camera
    function startCamera() {
      navigator.mediaDevices.getUserMedia({
        video: { facingMode: { exact: currentFacingMode } }
      })
        .then(stream => {
          video.srcObject = stream;
        })
        .catch(error => {
          console.error('Error accessing camera:', error);
          alert('Unable to access your camera. Please check your device settings.');
        });
    }

    // Show camera when "Capture Photo" is clicked
    photoButton.addEventListener('click', () => {
      photoData = null;
      cameraContainer.style.display = 'block';
      startCamera();
    });

    // Toggle camera between front and back
    toggleCameraButton.addEventListener('click', () => {
      currentFacingMode = currentFacingMode === 'user' ? 'environment' : 'user';
      startCamera();
    });

    // Capture photo
    captureButton.addEventListener('click', () => {
      const canvas = document.getElementById('canvas');
      canvas.width = video.videoWidth;
      canvas.height = video.videoHeight;
      canvas.getContext('2d').drawImage(video, 0, 0, canvas.width, canvas.height);
      photoData = canvas.toDataURL('image/png');
      alert('Photo captured successfully!');
    });

    // Save photo and reset camera view
    saveButton.addEventListener('click', () => {
      cameraContainer.style.display = 'none';
      alert('Photo saved successfully!');
    });

    // Your remaining JavaScript for managing the product list and other functionalities
  </script>
</body>
</html>

